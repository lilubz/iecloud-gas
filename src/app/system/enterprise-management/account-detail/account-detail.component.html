<h2 class="title">
  企业账号信息概览
</h2>
<div class="ui-g account-detail">
  <div class="ui-g-10">
    <div class="ui-g-12">
      <div class="ui-g-4 ui-g-nopad">
        <div class="inputgroup">
          <span>所在区域</span>
          <p-dropdown [options]="areaDrop" [(ngModel)]="searchParams.regionId" [style]="{'width':'calc(100% - 80px','max-width':'300px'}"></p-dropdown>
        </div>
      </div>
      <div class="ui-g-4 ui-g-nopad">
        <div class="inputgroup">
          <span>许可证号</span>
          <input type="text" class="textInput" [(ngModel)]="searchParams.licese" maxlength="20" pInputText placeholder="">
        </div>
      </div>
      <div class="ui-g-4 ui-g-nopad">
        <div class="inputgroup">
          <span>企业名称</span>
          <input type="text" class="textInput" [(ngModel)]="searchParams.enterpriseName" maxlength="20" pInputText placeholder="">
        </div>
      </div>
    </div>
  </div>
  <div class="ui-g-2">
    <button pButton type="button" label="查询" class="searchBtn" (click)="searchAccount()"></button>
  </div>
  <div class="ui-g-12">
    <p-dataTable [value]="accountList" [lazy]="true" dataKey="enterprise" [paginator]="true" [rows]="pages.pageSize" scrollable="true"
      scrollHeight="510px" [rowsPerPageOptions]="pages.pageOption" [totalRecords]="pages.total" (onLazyLoad)="onPageChange($event)"
      [(first)]="pages.first">
      <p-column [style]="{'width':'100px'}" header="编号">
        <ng-template let-index="rowIndex" pTemplate="body">
          <span>{{index+1}}</span>
        </ng-template>
      </p-column>
      <p-column [style]="{'width':'150px'}" field="enterpriseName" header="所属企业"></p-column>
      <p-column [style]="{'width':'150px'}" field="dangerousLicense" header="许可证号"></p-column>
      <p-column [style]="{'width':'150px'}" field="regionName" header="经营区域"></p-column>
      <p-column [style]="{'width':'150px'}" field="userName" header="管理员"></p-column>
      <p-column [style]="{'width':'150px'}" header="账号状态">
        <ng-template let-rowdata="rowData" pTemplate="body">
          <span>{{rowdata.isfreezed ? '停用' : '启用'}}</span>
        </ng-template>
      </p-column>
      <p-column [style]="{'width':'150px'}" header="操作">
        <ng-template let-data="rowData" let-index="rowIndex" pTemplate="body">
          <p-toggleButton onLabel="启用" offLabel="停用" [(ngModel)]="!data.isfreezed" (click)="changeStatus(data)"></p-toggleButton>
        </ng-template>
      </p-column>
      <ng-template pTemplate="emptymessage">
        <div class="text-left">
          未查询到数据
        </div>
      </ng-template>
    </p-dataTable>
  </div>


</div>
